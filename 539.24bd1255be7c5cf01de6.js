(self.webpackChunkbachelor_thesis_code=self.webpackChunkbachelor_thesis_code||[]).push([[539],{539:function(t,e,o){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ControlPointInfluenceVisualization=e.CurveDrawingVisualization=e.Curve=e.CurveDemo=void 0;var n=i(o(399)),r=o(479),s=o(451),a=function(){function t(t,e,o,i,n){this.p5=t,this._t=0,this._controlPoints=[],this._showPointLabels=!1,this._showPointPositions=!1,this.showCurveDrawingVisualization=!0,this._positionDisplayMode="absolute",this.lastHoverState=!1,this.lastDraggingState=!1,this.noControlPointsMessage="Click or touch anywhere on the canvas to add a point",this.observers=[],this._tMin=e,this._tMax=o,this._basePointDiameter=.015*t.width,this._baseLineWidth=.0025*t.width,this.controlPointColors=this.initControlPointColors(),this.showPointLabels=!1,this.showPointPositions=!1,this.positionDisplayMode="relative to canvas";var r=this.p5.createDiv();this.controlsContainerId="controls-container",r.id(this.controlsContainerId),i&&r.parent(i),r.class("flex-row center-cross-axis disable-dbl-tap-zoom prevent-text-select"),this.controlsForT=new h(t,this,this.controlsContainerId,n)}return Object.defineProperty(t.prototype,"tMin",{get:function(){return this._tMin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tMax",{get:function(){return this._tMax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"t",{get:function(){return this._t},set:function(t){this._t=t,this._t>this.tMax&&(this._t=this.tMin),this.t<this.tMin&&(this._t=this.tMax),this.controlsForT.updateSlider()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controlPoints",{get:function(){return this._controlPoints},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"basePointDiameter",{get:function(){return this._basePointDiameter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseLineWidth",{get:function(){return this._baseLineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointLabels",{get:function(){return this._showPointLabels},set:function(t){this._showPointLabels=t,this._controlPoints.forEach((function(e){return e.showLabel=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointPositions",{get:function(){return this._showPointPositions},set:function(t){this._showPointPositions=t,this._controlPoints.forEach((function(e){return e.showPosition=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionDisplayMode",{get:function(){return this._positionDisplayMode},set:function(t){this._positionDisplayMode=t,this._controlPoints.forEach((function(e){return e.positionDisplayMode=t}))},enumerable:!1,configurable:!0}),t.prototype.setCurve=function(t){this.curve=t},t.prototype.setCurveDrawingVisualization=function(t){this.curveDrawingVisualization=t},t.prototype.handleMousePressed=function(){if(0===this.controlPoints.length){var t=this.createCtrlPtAtPos(this.p5.mouseX,this.p5.mouseY);return this.addCtrlPtAtIndex(t,0),void t.handleMousePressed()}for(var e=this.controlPoints.slice(),o=0;o<e.length;o++){var i=e[o];if(i.handleMousePressed(),i.dragging)break}},t.prototype.handleMouseReleased=function(){this.controlPoints.forEach((function(t){return t.handleMouseReleased()}))},t.prototype.handleTouchStarted=function(){if(0!==this.controlPoints.length)for(var t=this.controlPoints.slice(),e=0;e<t.length;e++){var o=t[e];if(o.handleTouchStarted(),o.dragging)break}else{var i=this.p5.touches;if(0===i.length)console.warn("touches was unexpectedly empty");else{var n=this.createCtrlPtAtPos(i[0].x,i[0].y);this.addCtrlPtAtIndex(n,0),n.handleTouchStarted()}}},t.prototype.handleTouchReleased=function(){this.controlPoints.forEach((function(t){return t.handleTouchReleased()}))},Object.defineProperty(t.prototype,"hovering",{get:function(){var t,e=this.controlPoints.some((function(t){return t.hovering}));return e!=this.lastHoverState&&(this.lastHoverState=e,null===(t=this.onHoverChange)||void 0===t||t.call(this)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){var t,e=this.controlPoints.some((function(t){return t.dragging}));return e!=this.lastDraggingState&&(this.lastDraggingState=e,null===(t=this.onDraggingChange)||void 0===t||t.call(this)),e},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t,e;this.controlsForT.updateT(),0!==this.controlPoints.length?(this.valid?(null===(t=this.curve)||void 0===t||t.draw(),this.showCurveDrawingVisualization&&(null===(e=this.curveDrawingVisualization)||void 0===e||e.draw())):this.displayMessage(this.curveInvalidMessage),this.drawControlPoints()):this.displayMessage(this.noControlPointsMessage)},t.prototype.drawControlPoints=function(){this.controlPoints.forEach((function(t){return t.draw()}))},Object.defineProperty(t.prototype,"curveInvalidMessage",{get:function(){return"The curve is invalid/undefined"},enumerable:!1,configurable:!0}),t.prototype.displayMessage=function(t){this.p5.push(),this.p5.textAlign(this.p5.CENTER),this.p5.text(t,this.p5.width/2,this.p5.height/2),this.p5.pop()},t.prototype.addElementAfter=function(t){var e=this.controlPoints.findIndex((function(e){return e===t}));if(-1!==e){var o=this.p5.touches,i=o.length>0,n=i?o[0].x:this.p5.mouseX,r=i?o[0].y:this.p5.mouseY,s=this.createCtrlPtAtPos(n,r);this.addCtrlPtAtIndex(s,e+1),i?s.handleTouchStarted():s.handleMousePressed()}else console.warn("could not find provided element in control vertices of bezier, cancelling adding...")},t.prototype.createCtrlPtAtPos=function(t,e){var o=new s.DragVertex(this.p5,this.p5.createVector(t,e));return o.baseRadius=this.basePointDiameter/2,o.stroke=!1,o.editable=!0,o.showLabel=this._showPointLabels,o.showPosition=this._showPointPositions,o.positionDisplayMode=this._positionDisplayMode,o.assignTo(this),o},t.prototype.addCtrlPtAtIndex=function(t,e){this._controlPoints.splice(e,0,t),t.color=this.getColorForCtrlPtAtIndex(e),t.activeColor=t.color,this.handleCtrlPtAmountChange()},t.prototype.remove=function(t){this._controlPoints=this._controlPoints.filter((function(e){return e!==t}));var e=this.controlPointColors.findIndex((function(e){return e.color===t.color}));-1!==e&&(this.controlPointColors[e].taken=!1),this.handleCtrlPtAmountChange()},t.prototype.handleCtrlPtAmountChange=function(){var t=this.controlPoints.length;this._controlPoints.forEach((function(t,e){return t.label="P_{"+e+"}"})),this.controlsForT.visible=t>1,this.additionalCtrlPtAmountChangeHandling(),this.notifyObservers("controlPointsChanged")},t.prototype.additionalCtrlPtAmountChangeHandling=function(){},t.prototype.initControlPointColors=function(){return[this.p5.color(n.default.primaryColor),this.p5.color(r.lightenDarkenColor(n.default.successColor,15)),this.p5.color("#6727e2"),this.p5.color("#ff6600"),this.p5.color("#c85d84"),this.p5.color("#11e8db"),this.p5.color("#62421c"),this.p5.color("#4e7165"),this.p5.color("#1c087b")].map((function(t){return{color:t,taken:!1}}))},t.prototype.getColorForCtrlPtAtIndex=function(t){var e,o=this.controlPointColors.findIndex((function(t){return!t.taken})),i=-1!==o,n=null===(e=this.controlPoints[t+1])||void 0===e?void 0:e.color;if(!i||n&&this.controlPointColors.map((function(t){return t.color})).includes(n)){var s=this.p5.color(r.randomColorHexString()),a=null,h=null;for(t>0&&(a=this.controlPoints[t-1].color),t<this.controlPoints.length-1&&(h=this.controlPoints[t+1].color);a&&r.colorsTooSimilar(s,a)||h&&r.colorsTooSimilar(s,h)||r.luminanceFromP5Color(s)>180;)a&&console.log("color of previous control point: "+a.toString()),h&&console.log("color of next control point: "+h.toString()),console.log("current control point's color "+s.toString()+" with luminance "+r.luminanceFromP5Color(s)+" was too bright or too similar, finding better fit..."),s=this.p5.color(r.randomColorHexString()),console.log("new color: "+s.toString()+" (luminance: "+r.luminanceFromP5Color(s)+")");return s}var l=this.controlPointColors[o];return l.taken=!0,l.color},t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.unsubscribe=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.notifyObservers=function(t){this.observers.forEach((function(e){return e.update(t)}))},t}();e.CurveDemo=a;var h=function(){function t(e,o,i,n){var r=this;this.p5=e,this.demo=o,this.baseAnimationSpeedPerFrame=.005,this.currAnimationSpeedMultiplierIndex=t.animationSpeedMultipliers.findIndex((function(t){return 1===t})),this._animationRunning=!1,this.speedCompensationForSizeOfTInterval=this.demo.tMax-this.demo.tMin,this.controlsForTContainer=e.createDiv(),i&&this.controlsForTContainer.parent(i),this.controlsForTContainer.class("flex-row center-cross-axis disable-dbl-tap-zoom prevent-text-select full-width"),this.controlsForTContainer.id("controls-for-t"),this.sliderLabel=e.createSpan("t: "+this.demo.t.toFixed(2)),this.sliderLabel.parent(this.controlsForTContainer),this.slider=this.createSlider(),this.slowerButton=e.createButton('<span class="material-icons">fast_rewind</span>'),this.slowerButton.parent(this.controlsForTContainer),this.slowerButton.mouseClicked((function(){return r.rewindClicked()})),this.playPauseButton=e.createButton('<span class="material-icons">play_arrow</span>'),this.playPauseButton.parent(this.controlsForTContainer),this.playPauseButton.mouseClicked((function(){return r.animationRunning=!r.animationRunning})),o.subscribe(this),this.updateVisibility(),this.fasterButton=e.createButton('<span class="material-icons">fast_forward</span>'),this.fasterButton.parent(this.controlsForTContainer),this.fasterButton.mouseClicked((function(){return r.fastForwardClicked()})),n&&(this.baseAnimationSpeedPerFrame*=n)}return Object.defineProperty(t.prototype,"visible",{set:function(t){this.controlsForTContainer.style("visibility",t?"visible":"hidden")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationRunning",{get:function(){return this._animationRunning},set:function(t){this._animationRunning=t,this._animationRunning?this.playPauseButton.html('<span class="material-icons">pause</span>'):this.playPauseButton.html('<span class="material-icons">play_arrow</span>')},enumerable:!1,configurable:!0}),t.prototype.createSlider=function(){var t=this,e=this.p5.createSlider(this.demo.tMin,this.demo.tMax,this.demo.t,0);return e.style("flex-grow","2"),e.mousePressed((function(){return t.animationRunning=!1})),e.parent(this.controlsForTContainer),e},t.prototype.update=function(t){"controlPointsChanged"===t&&this.updateVisibility(),"rangeOfTChanged"===t&&(this.speedCompensationForSizeOfTInterval=this.demo.tMax-this.demo.tMin,this.updateSliderRange())},t.prototype.updateVisibility=function(){this.visible=this.demo.controlPoints.length>=2},t.prototype.updateSliderRange=function(){this.slider.remove(),this.slider=this.createSlider(),this.slowerButton.parent(this.controlsForTContainer),this.playPauseButton.parent(this.controlsForTContainer),this.fasterButton.parent(this.controlsForTContainer)},t.prototype.updateT=function(){this.animationRunning?this.demo.t+=this.baseAnimationSpeedPerFrame*this.speedCompensationForSizeOfTInterval*t.animationSpeedMultipliers[this.currAnimationSpeedMultiplierIndex]:this.demo.t=+this.slider.value()},t.prototype.updateSlider=function(){this.sliderLabel.html("t: "+this.demo.t.toFixed(2)),this.slider.value(this.demo.t)},t.prototype.fastForwardClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex<t.animationSpeedMultipliers.length-1&&this.currAnimationSpeedMultiplierIndex++},t.prototype.rewindClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex>0&&this.currAnimationSpeedMultiplierIndex--},t.animationSpeedMultipliers=[-4,-2,-1.5,-1,-.5,-.25,-.125,.125,.25,.5,1,1.5,2,4],t}(),l=function(){function t(t,e,o,i){this.p5=t,this.demo=e,this._noOfEvaluationSteps=null!=o?o:100,this.evaluationSteps=r.createArrayOfEquidistantAscendingNumbersInRange(this.noOfEvaluationSteps,this.demo.firstTValueWhereCurveDefined,this.demo.lastTValueWhereCurveDefined),this.color=null!=i?i:t.color(30)}return Object.defineProperty(t.prototype,"noOfEvaluationSteps",{get:function(){return this._noOfEvaluationSteps},set:function(t){this._noOfEvaluationSteps=t,this.calculateEvaluationSteps()},enumerable:!1,configurable:!0}),t.prototype.calculateEvaluationSteps=function(){return r.createArrayOfEquidistantAscendingNumbersInRange(this.noOfEvaluationSteps,this.demo.firstTValueWhereCurveDefined,this.demo.lastTValueWhereCurveDefined)},t}();e.Curve=l;e.CurveDrawingVisualization=function(t,e,o,i){this.p5=t,this.demo=e,this.onlyDrawPointOnCurve=!1,this.color=null!=o?o:t.color("#E1B000"),this.colorOfPointOnCurve=null!=i?i:t.color(n.default.errorColor)};var c=function(){function t(t){this.p5=t,this.barHeight=60,this.barWidth=30,this.borderThickness=5,this.ctrlPtInfluenceDataPoints=[],this.influenceBars=[],this.barBorderColor=t.color(120)}return t.prototype.updateInfluenceDataAndBars=function(){var t=this;this.ctrlPtInfluenceDataPoints=this.getCurrentControlPointInfluenceDataPoints();var e=this.influenceBars.map((function(t){return{ctrlPt:t.assignedControlPoint,offsetX:t.offsetFromCtrlPtPosX,offsetY:t.offsetFromCtrlPtPosY}}));this.influenceBars=this.ctrlPtInfluenceDataPoints.map((function(o){var i=e.find((function(t){return t.ctrlPt===o.controlPoint}));return i?new u(t.p5,o,{offsetFromCtrlPtPosX:i.offsetX,offsetFromCtrlPtPosY:i.offsetY}):new u(t.p5,o)}))},t.prototype.draw=function(){this.influenceBars.forEach((function(t){return t.draw()})),this.drawSummaryBar()},t.prototype.drawSummaryBar=function(){var t=this;this.p5.push(),this.p5.noStroke(),this.p5.rectMode(this.p5.CORNER);var e=this.p5.width-this.barWidth-2*this.borderThickness,o=this.p5.height-this.barHeight-2*this.borderThickness;this.p5.fill(this.barBorderColor),this.p5.rect(e,o,this.barWidth+this.borderThickness,this.barHeight+this.borderThickness);var i=0;this.ctrlPtInfluenceDataPoints.forEach((function(n){var r=n.currentCtrlPtInfluence()*(t.barHeight-t.borderThickness);t.p5.fill(n.controlPoint.color),t.p5.rect(e+t.borderThickness,o+t.barHeight-r-i,t.barWidth-t.borderThickness,r),i+=r})),this.p5.pop()},Object.defineProperty(t.prototype,"hovering",{get:function(){return this.influenceBars.some((function(t){return t.hovering}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return this.influenceBars.some((function(t){return t.dragging}))},enumerable:!1,configurable:!0}),t.prototype.handleTouchStarted=function(){for(var t=this.influenceBars.slice(),e=0;e<t.length;e++){var o=t[e];if(o.handleTouchStarted(),o.dragging)break}},t.prototype.handleTouchReleased=function(){this.influenceBars.forEach((function(t){return t.handleTouchReleased()}))},t.prototype.handleMousePressed=function(){for(var t=this.influenceBars.slice(),e=0;e<t.length;e++){var o=t[e];if(o.handleMousePressed(),o.dragging)break}},t.prototype.handleMouseReleased=function(){this.influenceBars.forEach((function(t){return t.handleMouseReleased()}))},t}();e.ControlPointInfluenceVisualization=c;var u=function(){function t(t,e,o){this.p5=t,this.data=e,this.borderColor=this.p5.color(120),this.height=60,this.width=30,this.borderThickness=5,this._dragging=!1,this.dragPtOffsetX=0,this.dragPtOffsetY=0,this._offsetFromCtrlPtPosX=1.25*-this.width,this._offsetFromCtrlPtPosY=this.width/2,this.fillBackgroundColor=t.color(r.lightenDarkenP5Color(this.p5,this.borderColor,20)),o&&(o.offsetFromCtrlPtPosX&&(this._offsetFromCtrlPtPosX=o.offsetFromCtrlPtPosX),o.offsetFromCtrlPtPosY&&(this._offsetFromCtrlPtPosY=o.offsetFromCtrlPtPosY),o.borderColor&&(this.borderColor=o.borderColor),o.borderThickness&&(this.borderThickness=o.borderThickness),o.height&&(this.height=o.height),o.width&&(this.width=o.width))}return Object.defineProperty(t.prototype,"offsetFromCtrlPtPosX",{get:function(){return this._offsetFromCtrlPtPosX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetFromCtrlPtPosY",{get:function(){return this._offsetFromCtrlPtPosY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assignedControlPoint",{get:function(){return this.data.controlPoint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.data.controlPoint.x+this._offsetFromCtrlPtPosX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.data.controlPoint.y+this._offsetFromCtrlPtPosY},enumerable:!1,configurable:!0}),t.prototype.draw=function(){this.dragging&&(this.updatePos(),r.drawLineXYCoords(this.p5,this.x,this.y,this.data.controlPoint.x,this.data.controlPoint.y,this.data.controlPoint.color,1));var t=this.data.controlPoint,e=this.data.currentCtrlPtInfluence(),o=this.height-this.borderThickness,i=e*o;this.p5.push(),this.p5.noStroke(),this.p5.rectMode(this.p5.CENTER),this.p5.fill(this.borderColor),this.p5.rect(this.x,this.y,this.width,this.height),this.p5.fill(this.fillBackgroundColor),this.p5.rect(this.x,this.y+(this.height-o)/2-this.borderThickness/2,this.width-this.borderThickness,o),this.p5.fill(t.color),0==i?(this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.text("no influence",this.x,this.y+this.height/2+2*this.borderThickness)):this.p5.rect(this.x,this.y+(this.height-i)/2-this.borderThickness/2,this.width-this.borderThickness,i),this.p5.pop()},Object.defineProperty(t.prototype,"hovering",{get:function(){return this.dragging||this.checkPtInsideRect(this.p5.mouseX,this.p5.mouseY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return this._dragging},enumerable:!1,configurable:!0}),t.prototype.updatePos=function(){var t=this,e=this.data.controlPoint;if(this.touchPointID){var o=this.p5.touches.find((function(e){return e.id===t.touchPointID}));o?(this._offsetFromCtrlPtPosX=o.x-this.dragPtOffsetX-e.x,this._offsetFromCtrlPtPosY=o.y-this.dragPtOffsetY-e.y):console.warn("touchPoint with ID "+this.touchPointID+" not found!")}else this._offsetFromCtrlPtPosX=this.p5.mouseX-this.dragPtOffsetX-e.x,this._offsetFromCtrlPtPosY=this.p5.mouseY-this.dragPtOffsetY-e.y},t.prototype.handleTouchStarted=function(){var t=this,e=this.p5.touches;if(0!==e.length){var o=e.find((function(e){return t.checkPtInsideRect(e.x,e.y)}));o&&(this.dragPtOffsetX=o.x-this.x,this.dragPtOffsetY=o.y-this.y,this._dragging=!0)}else console.warn("touches was unexpectedly empty")},t.prototype.handleTouchReleased=function(){this._dragging=!1},t.prototype.handleMousePressed=function(){var t=this.p5.mouseX,e=this.p5.mouseY;this.checkPtInsideRect(t,e)&&(this.dragPtOffsetX=t-this.x,this.dragPtOffsetY=e-this.y,this._dragging=!0)},t.prototype.handleMouseReleased=function(){this._dragging=!1},t.prototype.checkPtInsideRect=function(t,e){var o=this.x-this.width/2,i=this.x+this.width/2,n=this.y-this.height/2,r=this.y+this.height/2;return t>=o&&t<=i&&e>=n&&e<=r},t}()}}]);