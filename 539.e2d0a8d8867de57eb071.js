(self.webpackChunkbachelor_thesis_code=self.webpackChunkbachelor_thesis_code||[]).push([[539],{539:function(t,o,e){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.CurveDrawingVisualization=o.Curve=o.CurveDemo=void 0;var n=i(e(399)),r=e(479),s=e(451),a=function(){function t(t,o,e,i,n){this.p5=t,this._t=0,this._controlPoints=[],this._showPointLabels=!1,this._showPointPositions=!1,this.showCurveDrawingVisualization=!0,this._positionDisplayMode="absolute",this.noControlPointsMessage="Click or touch anywhere on the canvas to add a point",this.observers=[],this._tMin=o,this._tMax=e,this._basePointDiameter=.015*t.width,this._baseLineWidth=.0025*t.width,this.controlPointColors=this.initControlPointColors(),this.showPointLabels=!1,this.showPointPositions=!1,this.positionDisplayMode="relative to canvas";var r=this.p5.createDiv();this.controlsContainerId="controls-container",r.id(this.controlsContainerId),i&&r.parent(i),r.class("flex-row center-cross-axis disable-dbl-tap-zoom prevent-text-select"),this.controlsForT=new l(t,this,this.controlsContainerId,n)}return Object.defineProperty(t.prototype,"tMin",{get:function(){return this._tMin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tMax",{get:function(){return this._tMax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"t",{get:function(){return this._t},set:function(t){this._t=t,this._t>this.tMax&&(this._t=this.tMin),this.t<this.tMin&&(this._t=this.tMax),this.controlsForT.updateSlider()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controlPoints",{get:function(){return this._controlPoints},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"basePointDiameter",{get:function(){return this._basePointDiameter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseLineWidth",{get:function(){return this._baseLineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointLabels",{get:function(){return this._showPointLabels},set:function(t){this._showPointLabels=t,this._controlPoints.forEach((function(o){return o.showLabel=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointPositions",{get:function(){return this._showPointPositions},set:function(t){this._showPointPositions=t,this._controlPoints.forEach((function(o){return o.showPosition=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionDisplayMode",{get:function(){return this._positionDisplayMode},set:function(t){this._positionDisplayMode=t,this._controlPoints.forEach((function(o){return o.positionDisplayMode=t}))},enumerable:!1,configurable:!0}),t.prototype.setCurve=function(t){this.curve=t},t.prototype.setCurveDrawingVisualization=function(t){this.curveDrawingVisualization=t},t.prototype.handleMousePressed=function(){if(0===this.controlPoints.length){var t=this.createCtrlPtAtPos(this.p5.mouseX,this.p5.mouseY);return this.addCtrlPtAtIndex(t,0),void t.handleMousePressed()}for(var o=this.controlPoints.slice(),e=0;e<o.length;e++){var i=o[e];if(i.handleMousePressed(),i.dragging)break}},t.prototype.handleMouseReleased=function(){this.controlPoints.forEach((function(t){return t.handleMouseReleased()}))},t.prototype.handleTouchStarted=function(){if(0!==this.controlPoints.length)for(var t=this.controlPoints.slice(),o=0;o<t.length;o++){var e=t[o];if(e.handleTouchStarted(),e.dragging)break}else{var i=this.p5.touches;if(0===i.length)console.warn("touches was unexpectedly empty");else{var n=this.createCtrlPtAtPos(i[0].x,i[0].y);this.addCtrlPtAtIndex(n,0),n.handleTouchStarted()}}},t.prototype.handleTouchReleased=function(){this.controlPoints.forEach((function(t){return t.handleTouchReleased()}))},Object.defineProperty(t.prototype,"hovering",{get:function(){return this.controlPoints.some((function(t){return t.hovering}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return this.controlPoints.some((function(t){return t.dragging}))},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t,o;this.controlsForT.updateT(),0!==this.controlPoints.length?(this.valid?(null===(t=this.curve)||void 0===t||t.draw(),this.showCurveDrawingVisualization&&(null===(o=this.curveDrawingVisualization)||void 0===o||o.draw())):this.displayMessage(this.curveInvalidMessage),this.drawControlPoints()):this.displayMessage(this.noControlPointsMessage)},t.prototype.drawControlPoints=function(){this.controlPoints.forEach((function(t){return t.draw()}))},Object.defineProperty(t.prototype,"curveInvalidMessage",{get:function(){return"The curve is invalid/undefined"},enumerable:!1,configurable:!0}),t.prototype.displayMessage=function(t){this.p5.push(),this.p5.textAlign(this.p5.CENTER),this.p5.text(t,this.p5.width/2,this.p5.height/2),this.p5.pop()},t.prototype.addElementAfter=function(t){var o=this.controlPoints.findIndex((function(o){return o===t}));if(-1!==o){var e=this.p5.touches,i=e.length>0,n=i?e[0].x:this.p5.mouseX,r=i?e[0].y:this.p5.mouseY,s=this.createCtrlPtAtPos(n,r);this.addCtrlPtAtIndex(s,o+1),i?s.handleTouchStarted():s.handleMousePressed()}else console.warn("could not find provided element in control vertices of bezier, cancelling adding...")},t.prototype.createCtrlPtAtPos=function(t,o){var e=new s.DragVertex(this.p5,this.p5.createVector(t,o));return e.baseRadius=this.basePointDiameter/2,e.stroke=!1,e.editable=!0,e.showLabel=this._showPointLabels,e.showPosition=this._showPointPositions,e.positionDisplayMode=this._positionDisplayMode,e.assignTo(this),e},t.prototype.addCtrlPtAtIndex=function(t,o){this._controlPoints.splice(o,0,t),t.color=this.getColorForCtrlPtAtIndex(o),t.activeColor=t.color,this.handleCtrlPtAmountChange()},t.prototype.remove=function(t){this._controlPoints=this._controlPoints.filter((function(o){return o!==t}));var o=this.controlPointColors.findIndex((function(o){return o.color===t.color}));-1!==o&&(this.controlPointColors[o].taken=!1),this.handleCtrlPtAmountChange()},t.prototype.handleCtrlPtAmountChange=function(){var t=this.controlPoints.length;this._controlPoints.forEach((function(t,o){return t.label="P_{"+o+"}"})),this.controlsForT.visible=t>1,this.additionalCtrlPtAmountChangeHandling(),this.notifyObservers("controlPointsChanged")},t.prototype.additionalCtrlPtAmountChangeHandling=function(){},t.prototype.initControlPointColors=function(){return[this.p5.color(n.default.primaryColor),this.p5.color(r.lightenDarkenColor(n.default.successColor,15)),this.p5.color("#6727e2"),this.p5.color("#ff6600"),this.p5.color("#c85d84"),this.p5.color("#11e8db"),this.p5.color("#62421c"),this.p5.color("#4e7165"),this.p5.color("#1c087b")].map((function(t){return{color:t,taken:!1}}))},t.prototype.getColorForCtrlPtAtIndex=function(t){var o,e=this.controlPointColors.findIndex((function(t){return!t.taken})),i=-1!==e,n=null===(o=this.controlPoints[t+1])||void 0===o?void 0:o.color;if(!i||n&&this.controlPointColors.map((function(t){return t.color})).includes(n)){var s=this.p5.color(r.randomColorHexString()),a=null,l=null;for(t>0&&(a=this.controlPoints[t-1].color),t<this.controlPoints.length-1&&(l=this.controlPoints[t+1].color);a&&r.colorsTooSimilar(s,a)||l&&r.colorsTooSimilar(s,l)||r.luminanceFromP5Color(s)>180;)a&&console.log("color of previous control point: "+a.toString()),l&&console.log("color of next control point: "+l.toString()),console.log("current control point's color "+s.toString()+" with luminance "+r.luminanceFromP5Color(s)+" was too bright or too similar, finding better fit..."),s=this.p5.color(r.randomColorHexString()),console.log("new color: "+s.toString()+" (luminance: "+r.luminanceFromP5Color(s)+")");return s}var u=this.controlPointColors[e];return u.taken=!0,u.color},t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.unsubscribe=function(t){this.observers=this.observers.filter((function(o){return o!==t}))},t.prototype.notifyObservers=function(t){this.observers.forEach((function(o){return o.update(t)}))},t}();o.CurveDemo=a;var l=function(){function t(o,e,i,n){var r=this;this.p5=o,this.demo=e,this.baseAnimationSpeedPerFrame=.005,this.currAnimationSpeedMultiplierIndex=t.animationSpeedMultipliers.findIndex((function(t){return 1===t})),this._animationRunning=!1,this.speedCompensationForSizeOfTInterval=this.demo.tMax-this.demo.tMin,this.controlsForTContainer=o.createDiv(),i&&this.controlsForTContainer.parent(i),this.controlsForTContainer.class("flex-row center-cross-axis disable-dbl-tap-zoom prevent-text-select full-width"),this.controlsForTContainer.id("controls-for-t"),this.sliderLabel=o.createSpan("t: "+this.demo.t.toFixed(2)),this.sliderLabel.parent(this.controlsForTContainer),this.slider=this.createSlider(),this.slowerButton=o.createButton('<span class="material-icons">fast_rewind</span>'),this.slowerButton.parent(this.controlsForTContainer),this.slowerButton.mouseClicked((function(){return r.rewindClicked()})),this.playPauseButton=o.createButton('<span class="material-icons">play_arrow</span>'),this.playPauseButton.parent(this.controlsForTContainer),this.playPauseButton.mouseClicked((function(){return r.animationRunning=!r.animationRunning})),e.subscribe(this),this.updateVisibility(),this.fasterButton=o.createButton('<span class="material-icons">fast_forward</span>'),this.fasterButton.parent(this.controlsForTContainer),this.fasterButton.mouseClicked((function(){return r.fastForwardClicked()})),n&&(this.baseAnimationSpeedPerFrame*=n)}return Object.defineProperty(t.prototype,"visible",{set:function(t){this.controlsForTContainer.style("visibility",t?"visible":"hidden")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationRunning",{get:function(){return this._animationRunning},set:function(t){this._animationRunning=t,this._animationRunning?this.playPauseButton.html('<span class="material-icons">pause</span>'):this.playPauseButton.html('<span class="material-icons">play_arrow</span>')},enumerable:!1,configurable:!0}),t.prototype.createSlider=function(){var t=this,o=this.p5.createSlider(this.demo.tMin,this.demo.tMax,this.demo.t,0);return o.style("flex-grow","2"),o.mousePressed((function(){return t.animationRunning=!1})),o.parent(this.controlsForTContainer),o},t.prototype.update=function(t){"controlPointsChanged"===t&&this.updateVisibility(),"rangeOfTChanged"===t&&(this.speedCompensationForSizeOfTInterval=this.demo.tMax-this.demo.tMin,this.updateSliderRange())},t.prototype.updateVisibility=function(){this.visible=this.demo.controlPoints.length>=2},t.prototype.updateSliderRange=function(){this.slider.remove(),this.slider=this.createSlider(),this.slowerButton.parent(this.controlsForTContainer),this.playPauseButton.parent(this.controlsForTContainer),this.fasterButton.parent(this.controlsForTContainer)},t.prototype.updateT=function(){this.animationRunning?this.demo.t+=this.baseAnimationSpeedPerFrame*this.speedCompensationForSizeOfTInterval*t.animationSpeedMultipliers[this.currAnimationSpeedMultiplierIndex]:this.demo.t=+this.slider.value()},t.prototype.updateSlider=function(){this.sliderLabel.html("t: "+this.demo.t.toFixed(2)),this.slider.value(this.demo.t)},t.prototype.fastForwardClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex<t.animationSpeedMultipliers.length-1&&this.currAnimationSpeedMultiplierIndex++},t.prototype.rewindClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex>0&&this.currAnimationSpeedMultiplierIndex--},t.animationSpeedMultipliers=[-4,-2,-1.5,-1,-.5,-.25,-.125,.125,.25,.5,1,1.5,2,4],t}(),u=function(){function t(t,o,e,i){this.p5=t,this.demo=o,this._noOfEvaluationSteps=null!=e?e:100,this.evaluationSteps=r.createArrayOfEquidistantAscendingNumbersInRange(this.noOfEvaluationSteps,this.demo.firstTValueWhereCurveDefined,this.demo.lastTValueWhereCurveDefined),this.color=null!=i?i:t.color(30)}return Object.defineProperty(t.prototype,"noOfEvaluationSteps",{get:function(){return this._noOfEvaluationSteps},set:function(t){this._noOfEvaluationSteps=t,this.calculateEvaluationSteps()},enumerable:!1,configurable:!0}),t.prototype.calculateEvaluationSteps=function(){return r.createArrayOfEquidistantAscendingNumbersInRange(this.noOfEvaluationSteps,this.demo.firstTValueWhereCurveDefined,this.demo.lastTValueWhereCurveDefined)},t}();o.Curve=u;o.CurveDrawingVisualization=function(t,o,e,i){this.p5=t,this.demo=o,this.onlyDrawPointOnCurve=!1,this.color=null!=e?e:t.color("#E1B000"),this.colorOfPointOnCurve=null!=i?i:t.color(n.default.errorColor)}}}]);