(self.webpackChunkbachelor_thesis_code=self.webpackChunkbachelor_thesis_code||[]).push([[929],{929:function(t,e,i){"use strict";var o=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,r,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return s},r=this&&this.__spreadArray||function(t,e){for(var i=0,o=e.length,r=t.length;i<o;i++,r++)t[r]=e[i];return t},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BezierDemo=void 0;var s=n(i(35)),a=i(451),l=i(479),c=n(i(399)),h=function(){function t(t,e,i){this.p5=t,this._controlVertices=[],this._showPointLabels=!1,this._showPointPositions=!1,this._positionDisplayMode="absolute",this._t=0,this.observers=[],this._basePointDiameter=.015*t.width,this._baseLineWidth=.0025*t.width,this.controlPointColors=this.initControlPointColors(),this.showPointLabels=!1,this.showPointPositions=!1,this.positionDisplayMode="relative to canvas",this.bezierCurve=new u(t,this),this.deCasteljauVis=new p(t,this),this.controlsForT=new d(t,this,e,i)}return Object.defineProperty(t.prototype,"basePointDiameter",{get:function(){return this._basePointDiameter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseLineWidth",{get:function(){return this._baseLineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controlVertices",{get:function(){return this._controlVertices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointLabels",{get:function(){return this._showPointLabels},set:function(t){this._showPointLabels=t,this._controlVertices.forEach((function(e){return e.showLabel=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointPositions",{get:function(){return this._showPointPositions},set:function(t){this._showPointPositions=t,this._controlVertices.forEach((function(e){return e.showPosition=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionDisplayMode",{get:function(){return this._positionDisplayMode},set:function(t){this._positionDisplayMode=t,this._controlVertices.forEach((function(e){return e.positionDisplayMode=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"t",{get:function(){return this._t},set:function(t){this._t=t,this._t>1&&(this._t=0),this.t<0&&(this._t=1),this.controlsForT.updateSlider()},enumerable:!1,configurable:!0}),t.prototype.initControlPointColors=function(){return[this.p5.color(c.default.primaryColor),this.p5.color(l.lightenDarkenColor(c.default.successColor,15)),this.p5.color("#6727e2"),this.p5.color("#ff6600"),this.p5.color("#c85d84"),this.p5.color("#11e8db"),this.p5.color("#62421c"),this.p5.color("#4e7165"),this.p5.color("#1c087b")].map((function(t){return{color:t,taken:!1}}))},t.prototype.handleMousePressed=function(){if(0===this.controlVertices.length){var t=this.createVertexAtPos(this.p5.mouseX,this.p5.mouseY);return this.addVertexAtIndex(t,0),void t.handleMousePressed()}for(var e=this.controlVertices.slice(),i=0;i<e.length;i++){var o=e[i];if(o.handleMousePressed(),o.dragging)break}},t.prototype.getColorForVertexAtIndex=function(t){var e,i=this.controlPointColors.findIndex((function(t){return!t.taken})),o=-1!==i,r=null===(e=this.controlVertices[t+1])||void 0===e?void 0:e.color;if(!o||r&&this.controlPointColors.map((function(t){return t.color})).includes(r)){var n=this.p5.color(l.randomColorHexString()),s=null,a=null;for(t>0&&(s=this.controlVertices[t-1].color),t<this.controlVertices.length-1&&(a=this.controlVertices[t+1].color);s&&l.colorsTooSimilar(n,s)||a&&l.colorsTooSimilar(n,a)||l.luminanceFromP5Color(n)>180;)console.log("color "+n.toString()+" and luminance "+l.luminanceFromP5Color(n)+" was too bright or too similar"),n=this.p5.color(l.randomColorHexString());return n}var c=this.controlPointColors[i];return c.taken=!0,c.color},t.prototype.handleMouseReleased=function(){this.controlVertices.forEach((function(t){return t.handleMouseReleased()}))},t.prototype.handleTouchStarted=function(){if(0!==this.controlVertices.length)for(var t=this.controlVertices.slice(),e=0;e<t.length;e++){var i=t[e];if(i.handleTouchStarted(),i.dragging)break}else{var o=this.p5.touches;if(0===o.length)console.warn("touches was unexpectedly empty");else{var r=this.createVertexAtPos(o[0].x,o[0].y);this.addVertexAtIndex(r,0),r.handleTouchStarted()}}},t.prototype.handleTouchReleased=function(){this.controlVertices.forEach((function(t){return t.handleTouchReleased()}))},Object.defineProperty(t.prototype,"hovering",{get:function(){return this.controlVertices.some((function(t){return t.hovering}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return this.controlVertices.some((function(t){return t.dragging}))},enumerable:!1,configurable:!0}),t.prototype.draw=function(){this.controlVertices.length>0?(this.controlsForT.updateT(),this.controlVertices.length>1&&this.bezierCurve.draw(),this.controlVertices.length>1&&this.deCasteljauVis.draw(),this.drawControlVertices()):(this.p5.push(),this.p5.textAlign(this.p5.CENTER),this.p5.text("Click or touch anywhere on the canvas to add a point",this.p5.width/2,this.p5.height/2),this.p5.pop())},t.prototype.drawControlVertices=function(){this.controlVertices.forEach((function(t){return t.draw()}))},t.prototype.addElementAfter=function(t){var e=this.controlVertices.findIndex((function(e){return e===t}));if(-1!==e){var i=this.p5.touches,o=i.length>0,r=o?i[0].x:this.p5.mouseX,n=o?i[0].y:this.p5.mouseY,s=this.createVertexAtPos(r,n);this.addVertexAtIndex(s,e+1),o?s.handleTouchStarted():s.handleMousePressed()}else console.warn("could not find provided element in control vertices of bezier, cancelling adding...")},t.prototype.createVertexAtPos=function(t,e){var i=new a.DragVertex(this.p5,this.p5.createVector(t,e));return i.baseRadius=this.basePointDiameter/2,i.stroke=!1,i.editable=!0,i.showLabel=this._showPointLabels,i.showPosition=this._showPointPositions,i.positionDisplayMode=this._positionDisplayMode,i.assignTo(this),i},t.prototype.addVertexAtIndex=function(t,e){this._controlVertices.splice(e,0,t),t.color=this.getColorForVertexAtIndex(e),t.activeColor=t.color,this.handleCurveDegreeChange()},t.prototype.remove=function(t){this._controlVertices=this._controlVertices.filter((function(e){return e!==t}));var e=this.controlPointColors.findIndex((function(e){return e.color===t.color}));e&&(this.controlPointColors[e].taken=!1),this.handleCurveDegreeChange()},t.prototype.handleCurveDegreeChange=function(){var t=this.controlVertices.length;this._controlVertices.forEach((function(t,e){return t.label="P_{"+e+"}"})),this.deCasteljauVis.onlyDrawPointOnBezier=t<3,this.controlsForT.visible=t>1,this.notifyObservers("controlVerticesChanged")},t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.unsubscribe=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.notifyObservers=function(t){this.observers.forEach((function(e){return e.update(t)}))},t}();e.BezierDemo=h;var u=function(){function t(t,e){var i=this;this.p5=t,this.demo=e,this.evaluationSteps=100,this.zeroToOne=r([],o(Array(this.evaluationSteps+1).keys())).map((function(t){return t/i.evaluationSteps})),this.color=t.color(30)}return t.prototype.draw=function(){var t=this;if(0!==this.demo.controlVertices.length&&1!==this.demo.controlVertices.length){var e=this.zeroToOne.map((function(e){return t.findPointOnCurveWithDeCasteljau(t.demo.controlVertices.map((function(t){return t.position})),e)}));e.forEach((function(i,o){o!==e.length-1&&l.drawLineVector(t.p5,i,e[o+1],t.color,2*t.demo.baseLineWidth)}))}},t.prototype.findPointOnCurveWithDeCasteljau=function(t,e){if(1===t.length)return t[0];var i=[];return t.forEach((function(o,r){if(r!==t.length-1){var n=s.default.Vector.lerp(o,t[r+1],e);i.push(n)}})),this.findPointOnCurveWithDeCasteljau(i,e)},t}(),p=function(){function t(t,e){this.p5=t,this.bezierCurve=e,this.onlyDrawPointOnBezier=!1,this.color=t.color("#E1B000"),this.colorOfPointOnBezier=t.color(c.default.errorColor)}return t.prototype.draw=function(){this.recursiveDraw(this.bezierCurve.controlVertices.map((function(t){return t.position})))},t.prototype.recursiveDraw=function(t){var e=this;if(0!==t.length)if(1!==t.length){var i=[];t.forEach((function(o,r){if(r!==t.length-1){var n=s.default.Vector.lerp(o,t[r+1],e.bezierCurve.t);e.onlyDrawPointOnBezier||(l.drawLineVector(e.p5,o,t[r+1],e.color,e.bezierCurve.baseLineWidth),l.drawCircle(e.p5,n,e.color,e.bezierCurve.basePointDiameter)),i.push(n)}})),this.recursiveDraw(i)}else{var o=t[0].x,r=t[0].y;l.drawCircle(this.p5,t[0],this.colorOfPointOnBezier,1.5*this.bezierCurve.basePointDiameter);var n=this.bezierCurve.showPointLabels,a=this.bezierCurve.showPointPositions,c=this.bezierCurve.positionDisplayMode;if(this.bezierCurve.showPointLabels||this.bezierCurve.showPointPositions){var h=(n?"C(t) ":"")+(a?"absolute"===c?"("+o+", "+r+")":"("+(o/this.p5.width).toFixed(2)+", "+(r/this.p5.height).toFixed(2)+")":""),u=o+10,p=r-10;this.p5.push(),this.p5.text(h,u,p),this.p5.pop()}}},t}(),d=function(){function t(e,i,o,r){var n=this;this.demo=i,this.baseAnimationSpeedPerFrame=.005,this.currAnimationSpeedMultiplierIndex=t.animationSpeedMultipliers.findIndex((function(t){return 1===t})),this._animationRunning=!1,this.controlsContainer=e.createDiv(),o&&this.controlsContainer.parent(o),this.controlsContainer.class("flex-row center-cross-axis disable-dbl-tap-zoom prevent-text-select"),this.sliderLabel=e.createSpan("t: "+this.demo.t.toFixed(2)),this.sliderLabel.parent(this.controlsContainer),this.slider=e.createSlider(0,1,0,.00125),this.slider.parent(this.controlsContainer),this.slider.style("flex-grow","2"),this.slider.mousePressed((function(){return n.animationRunning=!1})),this.slowerButton=e.createButton('<span class="material-icons">fast_rewind</span>'),this.slowerButton.parent(this.controlsContainer),this.slowerButton.mouseClicked((function(){return n.rewindClicked()})),this.playPauseButton=e.createButton('<span class="material-icons">play_arrow</span>'),this.playPauseButton.parent(this.controlsContainer),this.playPauseButton.mouseClicked((function(){return n.animationRunning=!n.animationRunning})),this.visible=!1,this.fasterButton=e.createButton('<span class="material-icons">fast_forward</span>'),this.fasterButton.parent(this.controlsContainer),this.fasterButton.mouseClicked((function(){return n.fastForwardClicked()})),r&&(this.baseAnimationSpeedPerFrame*=r)}return Object.defineProperty(t.prototype,"visible",{set:function(t){this.controlsContainer.style("visibility",t?"visible":"hidden")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationRunning",{get:function(){return this._animationRunning},set:function(t){this._animationRunning=t,this._animationRunning?this.playPauseButton.html('<span class="material-icons">pause</span>'):this.playPauseButton.html('<span class="material-icons">play_arrow</span>')},enumerable:!1,configurable:!0}),t.prototype.updateT=function(){this.animationRunning?this.demo.t+=this.baseAnimationSpeedPerFrame*t.animationSpeedMultipliers[this.currAnimationSpeedMultiplierIndex]:this.demo.t=+this.slider.value()},t.prototype.updateSlider=function(){this.sliderLabel.html("t: "+this.demo.t.toFixed(2)),this.slider.value(this.demo.t)},t.prototype.fastForwardClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex<t.animationSpeedMultipliers.length-1&&this.currAnimationSpeedMultiplierIndex++},t.prototype.rewindClicked=function(){this.animationRunning=!0,this.currAnimationSpeedMultiplierIndex>0&&this.currAnimationSpeedMultiplierIndex--},t.animationSpeedMultipliers=[-4,-2,-1.5,-1,-.5,-.25,-.125,.125,.25,.5,1,1.5,2,4],t}()}}]);